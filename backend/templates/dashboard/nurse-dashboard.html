{% extends "dashboard/base.html" %}
{% load static %}
{% block content %}   

<div class="container">
  <h2 class="main-title">Nurse's Dashboard</h2>
  <div class="container">
    <!-- Top Cards -->
    <div class="row mb-4">
      <!-- Today Patients -->
      <div class="col-md-3">
        <div class="card text-center border-0 shadow shadow-lg">
          <div class="card-body">
          <h5 class="card-title mb-2">Today Patients</h5>
          <p class="card-summary text-primary fw-bold display-6 mb-1">24</p>
          <div class="progress mb-2" style="height: 6px;">
            <div class="progress-bar bg-primary" role="progressbar" style="width: 80%;" aria-valuenow="24" aria-valuemin="0" aria-valuemax="30"></div>
          </div>
          <small class="text-muted">80% of daily target</small>
          </div>
        </div>
      </div>
      <!-- Today Appointments -->
      <div class="col-md-3">
        <div class="card text-center border-0 shadow shadow-lg">
          <div class="card-body">
          <h5 class="card-title mb-2">Today Appointments</h5>
          <p class="card-summary text-success fw-bold display-6 mb-1">31</p>
          <div class="progress mb-2" style="height: 6px;">
            <div class="progress-bar bg-success" role="progressbar" style="width: 62%;" aria-valuenow="31" aria-valuemin="0" aria-valuemax="50"></div>
          </div>
          <small class="text-muted">62% booked</small>
          </div>
        </div>
      </div>
      <!-- Today Episode -->
      <div class="col-md-3">
        <div class="card text-center border-0 shadow shadow-lg">
          <div class="card-body">
          <h5 class="card-title mb-2">Today Episodes</h5>
          <p class="card-summary text-warning fw-bold display-6 mb-1">12</p>
          <div class="progress mb-2" style="height: 6px;">
            <div class="progress-bar bg-warning" role="progressbar" style="width: 40%;" aria-valuenow="12" aria-valuemin="0" aria-valuemax="30"></div>
          </div>
          <small class="text-muted">40% completed</small>
          </div>
        </div>
      </div>
      <!-- Today Collection -->
      <div class="col-md-3">
        <div class="card text-center border-0 shadow shadow-lg">
          <div class="card-body">
          <h5 class="card-title mb-2">Today Collection</h5>
          <p class="card-summary text-danger fw-bold display-6 mb-1">â‚¹ 12,500.00</p>
          <div class="progress mb-2" style="height: 6px;">
            <div class="progress-bar bg-danger" role="progressbar" style="width: 55%;" aria-valuenow="12500" aria-valuemin="0" aria-valuemax="23000"></div>
          </div>
          <small class="text-muted">55% of target</small>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content Row -->
    <div class="row">
      <!-- Left: Appointment Calendar -->
      <div class="col-md-6">
        <div class="card shadow-sm mb-4 h-100" style="min-height: 650px;">
          <div class="card-header bg-white fw-bold">Appointment Calendar</div>
          <div class="card-body p-0" style="height: 100%;">
          <!-- Calendar -->
          <div id="calendar" style="height: 100%; min-height: 500px;"></div>
          </div>
        </div>
      </div>

      <!-- Right: Today's Appointment List -->
      <div class="col-md-6">
        <div class="card shadow-sm mb-4 h-100" style="min-height: 650px;">
          <div class="card-header bg-white fw-bold d-flex justify-content-between">
          Today's Appointment List
          <button class="btn btn-primary">+ Add</button>
          </div>
          <div class="card-body" style="height: 500px; overflow-y: auto;">
          <table class="table table-bordered align-middle">
            <thead class="table-light">
            <tr>
              <th>Time</th>
              <th>Patient Name</th>
              <th>Mobile</th>
              <th>Consultant</th>
              <th>Age/Gender</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td>11:30 AM</td>
              <td>Ruchi Parmar</td>
              <td>7896541236</td>
              <td>Dr. Rutvik Patel</td>
              <td>50 Years</td>
            </tr>
            <!-- Add more rows as needed -->
            </tbody>
          </table>
          </div>
        </div>
      </div>
    </div>

  </div>

    <!-- Main Content Row -->
    <div class="row">
      <!-- Left: Appointment Calendar -->
      <div class="col-md-6">
        <div class="card shadow-sm mb-4 h-100" style="min-height: 650px;">
          <div class="card-header bg-white fw-bold">Appointment Calendar</div>
          <div class="card-body p-0" style="height: 100%;">
            <!-- Calendar -->
            <div id="calendar" style="height: 100%; min-height: 500px;"></div>
          </div>
        </div>
      </div>
      <!-- Right: Today's Appointment List -->
      <div class="col-md-6">
        <div class="card shadow-sm mb-4 h-100" style="min-height: 650px;">
          <div class="card-header bg-white fw-bold d-flex justify-content-between">
            Today's Appointment List
            <!-- <button class="btn btn-primary">+ Add</button> -->
          </div>
          <div class="card-body" style="height: 500px; overflow-y: auto;">
            <table class="table table-bordered align-middle">
              <thead class="table-light">
                <tr>
                  <th>DateTime</th>
                  <th>Patient Name</th>
                  <th>Mobile</th>
                  <th>Consultant</th>
                  <th>Age/Gender</th>
                </tr>
              </thead>
              <tbody>
                {% for appointment in today_appointment_data %}
                <tr>
                  <td>{{ appointment.appointment_date}} {{ appointment.appointment_time }}</td>
                  <td>{{ appointment.patient.name }}</td> 
                  <td>{{ appointment.patient.phone }}</td>
                  <td>{{ appointment.doctor.name }}</td>
                  <td>{{ appointment.patient.age }} / {{ appointment.patient.gender}} </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    
</div>

{% endblock %}